import React, { Component } from "react";
import { PageHeader, Tabs, Divider } from 'antd'
import { dataSource } from '../home/options'
import VisionLineChart from './components/VisionLineChart'
import VisionList from './components/VisionList'

import './index.scss'
const { TabPane } = Tabs;

class LookStudent extends Component {
    constructor(props) {
        super(props);
        this.routes = [
            {
                path: '/home',
                breadcrumbName: '首页',
            },
            {
                path: '/student/edit',
                breadcrumbName: '编辑学生信息',
            }
        ];
        this.state = {
            studentObj: null,
            data: [1, 2, 3, 4, 5]
        }
    }

    componentDidMount() {
        var urlParams = new URLSearchParams(this.props.history.location.search);
        let arr = dataSource.filter((data) => parseInt(data.studentId) === parseInt(urlParams.get('id')))
        this.setState({ studentObj: arr[0] })
    }

    render() {
        const { studentObj } = this.state;
        if (!studentObj) {
            return null
        }
        return (
            <div className="page-look-student">
                <PageHeader title="查看学生信息" breadcrumb={{ ...this.routes }} />
                <div className="warpper">
                    <div className="student-card" >
                        <h1>{studentObj.name}</h1>
                        <div className="one">
                            <div>
                                <h5>{studentObj.garde}年级({studentObj.class1})班</h5>
                                <p>班级</p>
                            </div>
                            <div>
                                <h5>{studentObj.gender}</h5>
                                <p>性别</p>
                            </div>
                            <div>
                                <h5>{studentObj.age}岁</h5>
                                <p>年龄</p>
                            </div>
                        </div>
                        <div className="two">
                            <div className="item">
                                <div>卡号：</div>
                                <div>{studentObj.cardNo}</div>
                            </div>
                            <div className="item">
                                <div>学号：</div>
                                <div>{studentObj.studentId}</div>
                            </div>
                            <div className="item">
                                <div>身份证号：</div>
                                <div>{studentObj.identityNumber}</div>
                            </div>
                            <div className="item">
                                <div>手机号：</div>
                                <div>--</div>
                            </div>
                        </div>
                        <div className="three">
                            <h3>监护人</h3>
                            <div className="item">
                                <div>1. {studentObj.guardian1} <Divider type="vertical" /> {studentObj.guardian1Phone} <Divider type="vertical" /> {studentObj.guardian1Bind}</div>
                                <div>2. {studentObj.guardian2} <Divider type="vertical" /> {studentObj.guardian2Phone} <Divider type="vertical" /> {studentObj.guardian2Bind}</div>
                            </div>
                        </div>
                    </div>
                    <div className="student-tab" >
                        <Tabs defaultActiveKey="1" onChange={this.handleChange}>
                            <TabPane tab="视力趋势" key="1">
                                <div className="result">{`视力结果：< 0.6 为屈光不正，≥0.6 为屈光正常`}</div>
                                <VisionLineChart />
                            </TabPane>
                            <TabPane tab="视力检查列表" key="2">
                                <div className="result">{`视力结果：< 0.6 为屈光不正，≥0.6 为屈光正常`}</div>
                                <VisionList data={[studentObj]} />
                            </TabPane>
                        </Tabs>
                    </div>
                </div>
            </div>
        );
    }
}

export default LookStudent;
